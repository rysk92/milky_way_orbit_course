# 天体計算に必要な数学: 三角関数

天体の位置を求める際に、角度の計算を行う場合があります。この場合、三角関数を活用します。
この章では、三角関数の基礎を確認します。

## 角度を表す方法

角度を表すための代表的な方法は以下があります。

### 度数法

1周を360°で表現する方法。歴における1年の日数に由来しています。

1°より細かい単位を表す時は、少数点を使う方法もとれますが、1° = 60' (分), 1' = 60'' (秒)
という単位を使うことが一般的です。

###  弧度法

コンピューターで角度の計算を行う場合、度数法ではなく弧度法での数値入力が必要です。

弧度法は扇形を考えた時に、弧の長さ / 半径 で角の大きさを表します。弧の長さと半径が一致する時を 1rad とする。半円(180°)の場合の弧の長さは

- 直径に対する円周の比率が円周率π: およそ3.14159
- 直径 = 2r
- 半円なので、半分(/2)にする

2πr/2 = πr

ラジアンは

πr / r = π rad

となる。一周周る(360°)の場合は、全円となるので

2πr / r = 2π rad

となります。

### 弧度法から度数法への変換

前の節で述べた通り 180° = π rad なので

度数 = rad * 180 / π

### 度数法から弧度法への変換

逆に、度数法から弧度法に変換する場合は

rad = 度数 * π / 180

で計算することができます。

### 時間表記

最初の章で紹介したとおり、天体の座標系では時間表記をする場合があります。

1時間 = 15°
1時間 = 60分
1分 = 60秒

という単位で表します。分・秒が度数法でも用いているにもかかわらず、表現方法が違うため注意が必要です。

## sin関数

直角三角形ABC(下図)を考えた時に、

∠BACの角度 = θ 

BCの長さ = a

ACの長さ = b

ABの長さ = c

とする。

sin関数ははθを値として、a/c を値を求めるものです。

![](./images/3_m_1.svg)

で表されます。


![](./images/3_1_triangle.png)

## cos関数

cos関数は

![](./images/3_m_2.svg)

で表されます。


![](./images/3_1_triangle.png)

## sin関数、cos関数を利用した回転操作

(x, y) = (1, 0) である点を考えた時に、原点を軸に反時計回りにθ度回転したいとします。
この場合、以下の式で回転後の座標を求めることが出来ます。

```
x' = x cos θ - y sin θ
y' = x sin θ + y cos θ
```

## tan関数

tan関数は

![](./images/3_m_3.svg)

で表されます。

![](./images/3_1_triangle.png)


## atan関数

関数の答えから、関数に用いた変数を計算する関数のことを、**逆関数** と呼びます。

a/b から、逆に角度を求めたい場合は、tan関数の逆関数を使います。この関数を atan関数と呼びます。

以下のように表記する場合もあります。

![](./images/3_m_4.svg)

この関数は、2つの惑星の座標から、角度を求めるときなどに便利です。

例)

下記の図の直角三角形で表した時、a=1, b=1とします。
a/b = 1です。
この場合 atan関数は、atan 1 = 45° のように導出することができます。

![](./images/3_1_triangle.png)

# 参考URL

- [三角関数 - Wikipedia](https://ja.wikipedia.org/wiki/%E4%B8%89%E8%A7%92%E9%96%A2%E6%95%B0)
- [回転移動の１次変換](http://www.geisya.or.jp/~mwm48961/kou2/linear_image3.html)
